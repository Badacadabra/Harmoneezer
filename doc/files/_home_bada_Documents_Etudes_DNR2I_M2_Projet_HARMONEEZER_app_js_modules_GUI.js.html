<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/home/bada/Documents/Etudes/DNR2I/M2/Projet/HARMONEEZER/app/js/modules/GUI.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AscendingTempo.html">AscendingTempo</a></li>
            
                <li><a href="../classes/DeezerAPIRequest.html">DeezerAPIRequest</a></li>
            
                <li><a href="../classes/Default.html">Default</a></li>
            
                <li><a href="../classes/DescendingTempo.html">DescendingTempo</a></li>
            
                <li><a href="../classes/EchoNestAPIRequest.html">EchoNestAPIRequest</a></li>
            
                <li><a href="../classes/GUI.html">GUI</a></li>
            
                <li><a href="../classes/GUI.account.html">GUI.account</a></li>
            
                <li><a href="../classes/GUI.atmospheres.html">GUI.atmospheres</a></li>
            
                <li><a href="../classes/GUI.favorites.html">GUI.favorites</a></li>
            
                <li><a href="../classes/GUI.loading.html">GUI.loading</a></li>
            
                <li><a href="../classes/GUI.menu.html">GUI.menu</a></li>
            
                <li><a href="../classes/GUI.misc.html">GUI.misc</a></li>
            
                <li><a href="../classes/GUI.playlist.html">GUI.playlist</a></li>
            
                <li><a href="../classes/GUI.scroll.html">GUI.scroll</a></li>
            
                <li><a href="../classes/GUI.search.html">GUI.search</a></li>
            
                <li><a href="../classes/Harmony.html">Harmony</a></li>
            
                <li><a href="../classes/Iterator.html">Iterator</a></li>
            
                <li><a href="../classes/KeyFirst.html">KeyFirst</a></li>
            
                <li><a href="../classes/None.html">None</a></li>
            
                <li><a href="../classes/Player.html">Player</a></li>
            
                <li><a href="../classes/Playlist.html">Playlist</a></li>
            
                <li><a href="../classes/Request.html">Request</a></li>
            
                <li><a href="../classes/RequestFactory.html">RequestFactory</a></li>
            
                <li><a href="../classes/Sorting.utils.html">Sorting.utils</a></li>
            
                <li><a href="../classes/Strategy.html">Strategy</a></li>
            
                <li><a href="../classes/TempoFirst.html">TempoFirst</a></li>
            
                <li><a href="../classes/Track.html">Track</a></li>
            
                <li><a href="../classes/User.html">User</a></li>
            
                <li><a href="../classes/Vocabulary.html">Vocabulary</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Ajax.html">Ajax</a></li>
            
                <li><a href="../modules/GUI.html">GUI</a></li>
            
                <li><a href="../modules/Iterator.html">Iterator</a></li>
            
                <li><a href="../modules/Music.html">Music</a></li>
            
                <li><a href="../modules/Player.html">Player</a></li>
            
                <li><a href="../modules/Playlist.html">Playlist</a></li>
            
                <li><a href="../modules/Sorting.html">Sorting</a></li>
            
                <li><a href="../modules/User.html">User</a></li>
            
                <li><a href="../modules/Vocabulary.html">Vocabulary</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: /home/bada/Documents/Etudes/DNR2I/M2/Projet/HARMONEEZER/app/js/modules/GUI.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var Player = require(&#x27;./Player.js&#x27;),
    Playlist = require(&#x27;./Playlist.js&#x27;),
    Sorting = require(&#x27;./Sorting.js&#x27;),
    User = require(&#x27;./User.js&#x27;);

/**
 * Module gérant l&#x27;interface graphique
 *
 * @module GUI
 * @class GUI
 */
module.exports = GUI = {
  /**
   * Lecteur manipulé par l&#x27;interface graphique.
   * C&#x27;est à la fois un Singleton et un Adapter.
   *
   * @property player
   * @type {Object}
   * @default null
   */
  player: null,
  /**
   * Utilisateur courant
   *
   * @property user
   * @type {Object}
   * @default null
   */
  user: null,
  /**
   * Attribut indiquant si la recherche est autorisée
   *
   * @property searchAllowed
   * @type {Boolean}
   * @default true
   */
  searchAllowed: true,
  /**
   * Attribut indiquant si les infobulles sont autorisées
   *
   * @property tooltipAllowed
   * @type {Boolean}
   * @default true
   */
  tooltipAllowed: true,
  /**
   * Attribut indiquant si les notifications sont autorisées
   *
   * @property notifAllowed
   * @type {Boolean}
   * @default true
   */
  notifAllowed: true,
  /**
   * Attribut indiquant si les sons d&#x27;ambiance sont autorisés
   *
   * @property soundAllowed
   * @type {Boolean}
   * @default true
   */
  soundAllowed: true,
  /**
   * Attribut indiquant si l&#x27;autocomplétion est autorisée dans la recherche
   *
   * @property autocompleteAllowed
   * @type {Boolean}
   * @default true
   */
  autocompleteAllowed: true,
  /**
   * Attribut indiquant la variation courante du tempo (entre 0 et 1)
   *
   * @property tempoVariation
   * @type {Number}
   * @default 0.05
   */
  tempoVariation: 0.05,
  /**
   * Attribut indiquant l&#x27;algorithme de tri sélectionné
   *
   * @property selectedSorting
   * @type {String}
   * @default &quot;default&quot;
   */
  selectedSorting: &quot;default&quot;,
  /**
   * Attribut indiquant si les sidebars ont été initialisées
   *
   * @property sidebarInitialized
   * @type {Boolean}
   * @default false
   */
  sidebarInitialized: false,
  /**
   * Méthode chargée d&#x27;initialiser l&#x27;interface graphique.
   * Cette méthode s&#x27;inspire du pattern Template dans sa conception.
   *
   * @method init
   */
  init: function() {
    GUI.atmospheres.backgrounds(); // Position idéale pour éviter les bugs !?
    GUI.css();
    GUI.carousel();
    GUI.drag();
    GUI.tooltips();
    GUI.checkboxes();
    GUI.listeners();
    GUI.menu.configSidebar(&quot;#playlist&quot;, &quot;blue&quot;);
    GUI.menu.configSidebar(&quot;#favorites&quot;, &quot;red&quot;);
    GUI.menu.configSidebar(&quot;#atmospheres&quot;, &quot;green&quot;);
    GUI.menu.configSidebar(&quot;#harmonic-tracks&quot;, &quot;violet&quot;);
    GUI.menu.configSidebar(&quot;#user&quot;, &quot;maroon&quot;);
    GUI.scroll.init();
    GUI.playlist.retrieve();
    GUI.player = Player.getPlayer();
    GUI.player.init();
    GUI.playlist.autochange();
    GUI.account.status();
  },
  /**
   * Hacks CSS
   *
   * @method css
   */
  css: function() {
    $( &quot;.pusher&quot; ).css(&quot;height&quot;, &quot;100%&quot;);
    if ($( window ).width() &lt; 600) {
      $( &quot;#menu&quot; ).switchClass( &quot;five&quot;, &quot;four&quot; );
      GUI.soundAllowed = false;
    } else {
      $( &quot;#menu&quot; ).switchClass( &quot;four&quot;, &quot;five&quot; );
      GUI.soundAllowed = true;
    }
  },
  /**
   * Initialisation du carousel contenant les résultats de recherche.
   * Le carousel est géré par le plugin OWL Carousel.
   *
   * @method carousel
   */
  carousel: function() {
    $( &quot;#tracks&quot; ).owlCarousel({
      items: 10,
      pagination: false,
      autoPlay: true,
      autoplayTimeout: 100,
      stopOnHover: true,
      lazyLoad : true
    });
  },
  /**
   * Initialisation du drag &amp; drop sur l&#x27;iPod.
   * Le drag &amp; drop est géré par jQuery UI.
   *
   * @method drag
   */
  drag: function() {
    $( &quot;#ipod-wrapper&quot; ).draggable({ scroll: false });
  },
  /**
   * Initialisation des tooltips.
   * Les tooltips sont gérées par Semantic UI et qTip².
   *
   * @method tooltips
   */
  tooltips: function() {
    if (GUI.tooltipAllowed) {
      $( &quot;[data-title != &#x27;&#x27;], [data-content != &#x27;&#x27;]&quot; ).popup(); // Semantic UI
      $( document ).tooltip({ // jQuery UI
        position: {
          my: &quot;center top&quot;,
          at: &quot;center bottom+5&quot;,
          within: &quot;#ipod-wrapper&quot;
        },
      });
    }
  },
  /**
   * Initialisation des checkboxes.
   * Les checkboxes sont gérées par Semantic UI.
   *
   * @method checkboxes
   */
  checkboxes: function() {
      $( &quot;.ui.checkbox&quot; ).checkbox();
  },
  /**
   * Définition de tous les écouteurs d&#x27;événements
   *
   * @method listeners
   */
  listeners: function() {

    // Écouteurs d&#x27;événements des sidebars
    var menuEvents = [
                        [&quot;.toggle-menu&quot;, &quot;click&quot;, GUI.menu.toggleSidebar],
                        [&quot;#playlist-btn&quot;, &quot;click&quot;, GUI.menu.toggleSidebar],
                        [&quot;#favorites-btn&quot;, &quot;click&quot;, GUI.menu.toggleSidebar],
                        [&quot;#atmospheres-btn&quot;, &quot;click&quot;, GUI.menu.toggleSidebar],
                        [&quot;#harmonic-tracks-btn&quot;, &quot;click&quot;, GUI.menu.toggleSidebar],
                        [&quot;#user-btn&quot;, &quot;click&quot;, GUI.menu.toggleSidebar],
                        [&quot;.toggle-all&quot;, &quot;click&quot;, GUI.menu.toggleAll]
                      ];

    // Écouteurs d&#x27;événements de la playlist
    var playlistEvents = [
                            [&quot;#random-btn&quot;, &quot;click&quot;, GUI.playlist.notRandom, &quot;async&quot;],
                            [&quot;#not-random-btn&quot;, &quot;click&quot;, GUI.playlist.random, &quot;async&quot;],
                            [&quot;#repeat-all-btn&quot;, &quot;click&quot;, GUI.playlist.noRepeat, &quot;async&quot;],
                            [&quot;#no-repeat-btn&quot;, &quot;click&quot;, GUI.playlist.repeatOne, &quot;async&quot;],
                            [&quot;#repeat-one-btn&quot;, &quot;click&quot;, GUI.playlist.repeatAll, &quot;async&quot;],
                            [&quot;#mute-btn&quot;, &quot;click&quot;, GUI.playlist.unmute, &quot;async&quot;],
                            [&quot;#unmute-btn&quot;, &quot;click&quot;, GUI.playlist.mute, &quot;async&quot;],
                            [&quot;#save-browser-btn&quot;, &quot;click&quot;, GUI.playlist.saveInBrowser],
                            [&quot;#save-deezer-btn&quot;, &quot;click&quot;, GUI.playlist.saveOnDeezer],
                            [&quot;#export-btn&quot;, &quot;click&quot;, GUI.playlist.export],
                            [&quot;#delete-btn&quot;, &quot;click&quot;, GUI.playlist.delete],
                            [&quot;.previous-btn&quot;, &quot;click&quot;, GUI.playlist.previous],
                            [&quot;.back-btn&quot;, &quot;click&quot;, GUI.playlist.back],
                            [&quot;.play-btn&quot;, &quot;click&quot;, GUI.playlist.play, &quot;async&quot;],
                            [&quot;.playlist-item&quot;, &quot;click&quot;, GUI.playlist.playFrom, &quot;async&quot;],
                            [&quot;.pause-btn&quot;, &quot;click&quot;, GUI.playlist.pause],
                            [&quot;.play-pause-btn&quot;, &quot;click&quot;, GUI.playlist.playPause],
                            [&quot;.forth-btn&quot;, &quot;click&quot;, GUI.playlist.forth],
                            [&quot;.next-btn&quot;, &quot;click&quot;, GUI.playlist.next],
                            [&quot;#playlist&quot;, &quot;trackChanged&quot;, GUI.playlist.icon],
                            [&quot;#playlist&quot;, &quot;trackRemoved&quot;, GUI.playlist.removeTrack]
                         ];

    // Écouteurs d&#x27;événements des favoris
    var favoritesEvents = [
                             [&quot;#fav-ipod&quot;, &quot;click&quot;, GUI.favorites.ipod],
                             [&quot;#fav-tooltip&quot;, &quot;click&quot;, GUI.favorites.tooltip],
                             [&quot;#fav-notify&quot;, &quot;click&quot;, GUI.favorites.notify],
                             [&quot;#fav-sound&quot;, &quot;click&quot;, GUI.favorites.sound],
                             [&quot;#fav-autocomplete&quot;, &quot;click&quot;, GUI.favorites.autocomplete],
                             [&quot;#fav-duplicate&quot;, &quot;click&quot;, GUI.favorites.duplicate],
                             [&quot;#fav-tempo-range&quot;, &quot;input&quot;, GUI.favorites.tempoRange],
                             [&quot;#fav-default-sorting&quot;, &quot;click&quot;, GUI.favorites.defaultSorting],
                             [&quot;#fav-tempo-first-sorting&quot;, &quot;click&quot;, GUI.favorites.tempoFirstSorting],
                             [&quot;#fav-key-first-sorting&quot;, &quot;click&quot;, GUI.favorites.keyFirstSorting],
                             [&quot;#fav-asc-tempo-sorting&quot;, &quot;click&quot;, GUI.favorites.ascTempoSorting],
                             [&quot;#fav-desc-tempo-sorting&quot;, &quot;click&quot;, GUI.favorites.descTempoSorting],
                             [&quot;#fav-no-sorting&quot;, &quot;click&quot;, GUI.favorites.noSorting]
                         ];

    // Écouteurs d&#x27;événements des ambiances
    var atmospheresEvents = [
                              [&quot;#neutral-atmo&quot;, &quot;click&quot;, GUI.atmospheres.neutral],
                              [&quot;#rock-atmo&quot;, &quot;click&quot;, GUI.atmospheres.rock],
                              [&quot;#electro-atmo&quot;, &quot;click&quot;, GUI.atmospheres.electro],
                              [&quot;#hiphop-atmo&quot;, &quot;click&quot;, GUI.atmospheres.hiphop],
                              [&quot;#folk-atmo&quot;, &quot;click&quot;, GUI.atmospheres.folk],
                              [&quot;#classical-atmo&quot;, &quot;click&quot;, GUI.atmospheres.classical],
                              [&quot;#jazz-atmo&quot;, &quot;click&quot;, GUI.atmospheres.jazz],
                              [&quot;#metal-atmo&quot;, &quot;click&quot;, GUI.atmospheres.metal]
                            ];

    // Écouteurs d&#x27;événements relatifs au compte utilisateur
    var userEvents = [
                        [&quot;#login&quot;, &quot;click&quot;, GUI.account.login],
                        [&quot;#logout&quot;, &quot;click&quot;, GUI.account.logout],
                      ];

    // Écouteurs d&#x27;événements divers
    var otherEvents = [
                        [&quot;#logo&quot;, &quot;click&quot;, GUI.misc.logo],
                        [&quot;#request&quot;, &quot;click&quot;, GUI.search.warning],
                        [&quot;#toggle-carousel&quot;, &quot;click&quot;, GUI.misc.toggleCarousel],
                        [&quot;#tracks-help&quot;, &quot;click&quot;, GUI.misc.help, &quot;async&quot;],
                        [window, &quot;resize&quot;, GUI.css]
                      ];

    // Ajout des écouteurs d&#x27;événements
    addEvents(menuEvents);
    addEvents(playlistEvents);
    addEvents(favoritesEvents);
    addEvents(atmospheresEvents);
    addEvents(userEvents);
    addEvents(otherEvents);

    // Fonctions d&#x27;ajout d&#x27;événements
    function addEvents(e) {
      for (var i = 0, len = e.length; i &lt; len; i++) {
        if (e[i][3] == &quot;async&quot;) {
          $( document ).on( e[i][1], e[i][0], e[i][2]); // délégation
        } else {
          $( e[i][0] ).on( e[i][1], e[i][2] );
        }
      }
    }

  },
  /**
   * Méthode template créant dynamiquement un fragment HTML
   *
   * @method template
   * @param {String} type Type de template (suggestions de base ou harmoniques)
   * @param {Object} track Objet représentant morceau de musique
   * @param {Boolean} isTempoCompatible Compatibilité ou non du tempo
   * @param {Boolean} isKeyCompatible Compatibilité ou non de la tonalité
   */
  template: function(type, track, isTempoCompatible, isKeyCompatible) {

    var html = &quot;&quot;,
        artistName = &quot;&quot;,
        maxStringLength = 0;

    if (type == &quot;base-track&quot;) { // Morceau de base

      artistName = track.getArtist();
      maxStringLength = 100;

      // Si le nom de l&#x27;artiste est exagérément long, on le tronque à l&#x27;affichage
      if (artistName.length &gt; maxStringLength) {
        artistName = artistName.substr(0, maxStringLength) + &quot; ...&quot;;
      }

      html += &#x27;&lt;div class=&quot;track&quot; itemscope itemtype=&quot;https://schema.org/MusicRecording&quot;&gt;&#x27;;
      html += &#x27; &lt;figure id=&quot;submit-&#x27; + track.getId() + &#x27;&quot;&gt;&#x27;;
      html += &#x27;   &lt;img class=&quot;lazyOwl&quot; data-src=&quot;&#x27; + track.getCover() + &#x27;&quot; alt=&quot;&#x27; + track.getTitle() + &#x27;&quot;&gt;&#x27;;
      html += &#x27;   &lt;figcaption&gt;&#x27;;
      html += &#x27;     &lt;div&gt;&#x27;;
      html += &#x27;       &lt;h3 class=&quot;track-title&quot; itemprop=&quot;name&quot;&gt;&#x27; + track.getTitle() + &#x27;&lt;/h3&gt;&#x27;;
      html += &#x27;       &lt;p class=&quot;artist-name&quot; itemprop=&quot;byArtist&quot;&gt;&#x27; + artistName + &quot;&lt;/p&gt;&quot;;
      html += &#x27;     &lt;/div&gt;&#x27;;
      html += &#x27;   &lt;/figcaption&gt;&#x27;;
      html += &#x27; &lt;/figure&gt;&#x27;;
      html += &#x27; &lt;input type=&quot;hidden&quot; value=&quot;&#x27; + encodeURIComponent(JSON.stringify(track)) + &#x27;&quot;&gt;&#x27;;
      html += &#x27;&lt;/div&gt;&#x27;;

      return html;

    } else if (type == &quot;harmonic-track&quot;) { // Morceau harmonique

      artistName = track.getArtist();
      maxStringLength = 100;

      var tempoCssClass = &quot;red&quot;,
          tonalityCssClass = &quot;red&quot;;

      // On gère le cas où le nom de l&#x27;artiste est exagérément long
      if (artistName.length &gt; maxStringLength) {
        artistName = artistName.substr(0, maxStringLength) + &quot; ...&quot;;
      }

      // On signale les morceaux compatibles
      if (isTempoCompatible) { tempoCssClass = &quot;green&quot;; }
      if (isKeyCompatible) { tonalityCssClass = &quot;green&quot;; }

      html += &#x27;&lt;a class=&quot;harmonic-track&quot; itemscope itemtype=&quot;https://schema.org/MusicComposition&quot;&gt;&#x27;;
      html += &#x27; &lt;figure id=&quot;suggestion-&#x27; + track.getId() + &#x27;&quot;&gt;&#x27;;
      html += &#x27;   &lt;img src=&quot;&#x27; + track.getCover() + &#x27;&quot; alt=&quot;&#x27; + track.getTitle() + &#x27;&quot;&gt;&#x27;;
      html += &#x27;   &lt;figcaption&gt;&#x27;;
      html += &#x27;     &lt;div&gt;&#x27;;
      html += &#x27;      &lt;h3 itemprop=&quot;name&quot;&gt;&#x27; + track.getTitle() + &#x27;&lt;/h3&gt;&#x27;;
      html += &#x27;      &lt;p class=&quot;artist-name&quot; itemprop=&quot;composer&quot;&gt;&#x27; + artistName + &#x27;&lt;/p&gt;&#x27;;
      html += &#x27;      &lt;p class=&quot;&#x27; + tempoCssClass + &#x27;&quot; itemprop=&quot;musicalKey&quot;&gt;Tempo : &#x27; + track.getTempo() + &#x27; BPM&lt;/p&gt;&#x27;;
      html += &#x27;      &lt;p class=&quot;&#x27; + tonalityCssClass + &#x27;&quot; itemprop=&quot;musicalKey&quot;&gt;Tonalité : &#x27; + track.getKey() + &#x27; &#x27; + track.getMode() + &#x27;&lt;/p&gt;&#x27;;
      html += &#x27;     &lt;/div&gt;&#x27;;
      html += &#x27;   &lt;/figcaption&gt;&#x27;;
      html += &#x27; &lt;/figure&gt;&#x27;;
      html += &#x27; &lt;input type=&quot;hidden&quot; value=&quot;&#x27; + encodeURIComponent(JSON.stringify(track)) + &#x27;&quot;&gt;&#x27;;
      html += &#x27;&lt;/a&gt;&#x27;;

      return html;

    } else if (type == &quot;autocomplete&quot;) { // Autocomplétion

      html += &#x27;&lt;div id=&quot;autocomplete-&#x27; + track.getId() + &#x27;&quot;&gt;&#x27;;
      html += &#x27; &lt;strong&gt;&#x27; + track.getTitle() + &#x27;&lt;/strong&gt;&lt;br&gt;&#x27;;
      html += &#x27; &lt;em&gt;&#x27; + track.getArtist() + &#x27;&lt;/em&gt;&#x27;;
      html += &#x27;&lt;/div&gt;&#x27;;

      return html;

    } else { // Case d&#x27;aide

      html += &#x27;&lt;a class=&quot;item title&quot;&gt;&#x27;;
      html += &#x27; &lt;h2&gt;Suggestions&lt;/h2&gt;&#x27;;
      html += &#x27;&lt;/a&gt;&#x27;;
      html += &#x27;&lt;a id=&quot;tracks-help&quot; href=&quot;#&quot;&gt;&#x27;;
      html += &#x27;  &lt;i class=&quot;help circle icon&quot;&gt;&lt;/i&gt;&#x27;;
      html += &#x27;&lt;/a&gt;&#x27;;

      return html;

    }
  },
  /**
   * Méthode Facade permettant d&#x27;éviter l&#x27;abondance de conditions dans le code
   *
   * @method alert
   * @param {String} type Type d&#x27;alerte (succès, erreur, message)
   * @param {String} message Message d&#x27;alerte
   * @param {Number} timer Durée de vie de la notification
   */
  alert: function(type, message, timer) {
    var notification = null;
    if (GUI.notifAllowed) {
      switch (type) {
        case &quot;success&quot;:
          notification = alertify.success(message, timer);
          break;
        case &quot;error&quot;:
          notification = alertify.error(message, timer);
          break;
        case &quot;warning&quot;:
          notification = alertify.warning(message, timer);
          break;
        case &quot;message&quot;:
          notification = alertify.message(message, timer);
          break;
      }
      return notification;
    }
  },
  /**
   * Suppression de toutes les notifications actives
   *
   * @method cleanNotifications
   */
  cleanNotifications: function() {
    alertify.dismissAll();
  },
  /**
   * Affichage des suggestions harmoniques à la fin du processus de recherche
   *
   * @method displayFinalTracklist
   */
  displayFinalTracklist: function() {
    $( &quot;#harmonic-tracks&quot; )
      .sidebar( &quot;setting&quot;, &quot;transition&quot;, &quot;scale down&quot; )
      .sidebar( &quot;show&quot; );
  },
  /**
   * Mini-classe de gestion de la barre de recherche
   *
   * @class GUI.search
   */
  search: {
    /**
     * Activation du moteur de recherche
     *
     * @method on
     */
    on: function() {
      $( &quot;#request&quot; )
        .val( &quot;&quot; )
        .prop( &quot;readonly&quot;, false )
        .next()
        .switchClass( &quot;ban&quot;, &quot;search&quot; );
      GUI.searchAllowed = true;
    },
    /**
     * Désactivation du moteur de recherche
     *
     * @method off
     */
    off: function() {
      $( &quot;#request&quot; )
        .val( &quot;Utilisez les suggestions harmoniques !&quot; )
        .prop( &quot;readonly&quot;, true )
        .next()
        .switchClass( &quot;search&quot;, &quot;ban&quot; );
      GUI.searchAllowed = false;
    },
    /**
     * Gestion de l&#x27;alerte concernant l&#x27;état de la recherche
     *
     * @method warning
     */
    warning: function() {
      if (!GUI.searchAllowed) {
        console.log(&quot;OK&quot;);
        var message = &quot;Voulez-vous vraiment lancer une nouvelle recherche ?&lt;br&gt;&quot;;
            message += &quot;La progression harmonique de votre playlist ne sera plus garantie...&quot;;

        alertify.defaults.glossary.title = &quot;Attention !&quot;;
        alertify.confirm(message, function() {
          GUI.search.on();
        }).set(&quot;labels&quot;, { ok:&quot;Oui&quot;, cancel:&quot;Non&quot; });
      }
    },
    /**
     * Invisibilité de l&#x27;autocomplétion en dessous de 3 caractères
     *
     * @method hideAutocomplete
     */
    hideAutocomplete: function() {
      var keyword = $( &quot;#request&quot; ).val();
      if (keyword.length &lt; 3) {
        $( &quot;#autocomplete&quot; ).slideUp();
      }
    }
  },
  /**
   * Mini-classe de gestion des scrollbars.
   * Les scrollbars dépendent du plugin mCustomScrollbar.
   *
   * @class GUI.scroll
   */
  scroll: {
    /**
     * Initialisation des scrollbars
     *
     * @method init
     */
    init: function() {
      $( &quot;#playlist, #favorites&quot; ).mCustomScrollbar({
        theme: &quot;dark&quot;,
        scrollInertia: 0
      });
    },
    /**
     * Réinitialisation complète d&#x27;une scrollbar
     *
     * @method reset
     */
    reset: function($container) {
      $container.mCustomScrollbar({
        mouseWheelPixels: 300
      });
    },
    /**
     * Destruction d&#x27;une scrollbar
     *
     * @method destroy
     */
    destroy: function($container) {
      $container.mCustomScrollbar( &quot;destroy&quot; );
    }
  },
  /**
   * Mini-classe interne gérant le chargement
   *
   * @class GUI.loading
   */
  loading: {
    /**
     * Activer le loader
     *
     * @method on
     */
    on: function() {
      $( &quot;.ui.page.dimmer&quot; ).addClass( &quot;active&quot; );
    },
    /**
     * Désactiver le loader
     *
     * @method off
     */
    off: function() {
      $( &quot;.ui.page.dimmer&quot; ).removeClass( &quot;active&quot; );
    }
  },
  /**
   * Classe interne gérant les éléments relatifs au menu
   *
   * @class GUI.menu
   */
  menu: {
    /**
     * Configuration d&#x27;une sidebar
     *
     * @method configSidebar
     */
    configSidebar: function(id, color) {
      $( id )
        .sidebar({
          onShow: function() {
            $( id + &quot;-btn&quot; ).addClass( color + &quot;-item&quot; );
          },
          onHide: function() {
            $( id + &quot;-btn&quot; ).removeClass( color + &quot;-item&quot; );
          }
        })
        .sidebar( &quot;setting&quot;, &quot;transition&quot;, &quot;overlay&quot; );
    },
    /**
     * Afficher/Cacher une sidebar
     *
     * @method toggleSidebar
     */
    toggleSidebar: function() {
      // Comme il y a plusieurs boutons pour le menu, c&#x27;est géré par une classe
      if ($( this ).hasClass(&quot;toggle-menu&quot;)) {
        $( &quot;#menu&quot; ).sidebar( &quot;toggle&quot; );
      } else {
        // Le pattern de nommage est le suivant : sidebarname-btn
        var btnId = $( this ).attr( &quot;id&quot; ),
            sidebarId = btnId.substr(0, btnId.lastIndexOf(&quot;-&quot;));

        $( &quot;#&quot; + sidebarId ).sidebar( &quot;toggle&quot; );
      }
    },
    /**
     * Afficher/Cacher toutes les sidebars
     *
     * @method toggleAll
     */
    toggleAll: function() {
      $( &quot;.sidebar&quot; ).sidebar( &quot;toggle&quot; );
    }
  },
  /**
   * Classe interne gérant les éléments relatifs à la playlist
   *
   * @class GUI.playlist
   */
  playlist: {
    /**
     * Récupération d&#x27;une playlist sauvegardée dans le local storage
     *
     * @method retrieve
     */
    retrieve: function() {
      var savedPlaylist = localStorage.getItem(&quot;playlist&quot;),
          ids = [];

      if (savedPlaylist !== null) {
        Playlist.selectedTracks = JSON.parse(savedPlaylist);
        for (var i = 0, len = Playlist.selectedTracks.length; i &lt; len; i++) {
          ids.push(Playlist.selectedTracks[i]._id);
        }
        Playlist.tracksIds = ids;
      }
    },
    /**
     * Désactivation de la lecture aléatoire
     *
     * @method notRandom
     */
    notRandom: function() {
      GUI.player.random(false);
      $( &quot;#random-btn .icon&quot; ).switchClass( &quot;random&quot;, &quot;minus&quot; );
      $( &quot;#random-btn&quot; ).attr( &quot;id&quot;, &quot;not-random-btn&quot; );
      GUI.alert(&quot;error&quot;, &quot;Lecture aléatoire désactivée&quot;, 5);
    },
    /**
     * Activation de la lecture aléatoire
     *
     * @method random
     */
    random: function() {
      GUI.player.random(true);
      $( &quot;#not-random-btn .icon&quot; ).switchClass( &quot;minus&quot;, &quot;random&quot; );
      $( &quot;#not-random-btn&quot; ).attr( &quot;id&quot;, &quot;random-btn&quot; );
      GUI.alert(&quot;success&quot;, &quot;Lecture aléatoire activée&quot;, 5);
    },
    /**
     * Désactivation de la répétition
     *
     * @method noRepeat
     */
    noRepeat: function() {
      GUI.player.repeat(0);
      $( &quot;#repeat-all-btn .icon&quot; ).switchClass( &quot;refresh&quot;, &quot;minus&quot; );
      $( &quot;#repeat-all-btn&quot; ).attr( &quot;id&quot;, &quot;no-repeat-btn&quot; );
      GUI.alert(&quot;message&quot;, &quot;Pas de répétition&quot;, 5);
    },
    /**
     * Activation de la répétition d&#x27;un morceau
     *
     * @method repeatOne
     */
    repeatOne: function() {
      GUI.player.repeat(2);
      $( &quot;#no-repeat-btn .icon&quot; ).switchClass( &quot;minus&quot;, &quot;repeat&quot; );
      $( &quot;#no-repeat-btn&quot; ).attr( &quot;id&quot;, &quot;repeat-one-btn&quot; );
      GUI.alert(&quot;message&quot;, &quot;Répétition du morceau en cours&quot;, 5);
    },
    /**
     * Activation de la répétition de tous les morceaux
     *
     * @method repeatAll
     */
    repeatAll: function() {
      GUI.player.repeat(1);
      $( &quot;#repeat-one-btn .icon&quot; ).switchClass( &quot;repeat&quot;, &quot;refresh&quot; );
      $( &quot;#repeat-one-btn&quot; ).attr( &quot;id&quot;, &quot;repeat-all-btn&quot; );
      GUI.alert(&quot;message&quot;, &quot;Répétition de tous les morceaux&quot;, 5);
    },
    /**
     * Activation du mode silencieux
     *
     * @method mute
     */
    mute: function() {
      GUI.player.mute(true);
      $( &quot;#unmute-btn .icon&quot; ).switchClass( &quot;unmute&quot;, &quot;mute&quot; );
      $( &quot;#unmute-btn&quot; ).attr( &quot;id&quot;, &quot;mute-btn&quot; );
      GUI.alert(&quot;error&quot;, &quot;Son coupé !&quot;, 5);
    },
    /**
     * Désactivation du mode silencieux
     *
     * @method unmute
     */
    unmute: function() {
      GUI.player.mute(false);
      $( &quot;#mute-btn .icon&quot; ).switchClass( &quot;mute&quot;, &quot;unmute&quot; );
      $( &quot;#mute-btn&quot; ).attr( &quot;id&quot;, &quot;unmute-btn&quot; );
      GUI.alert(&quot;success&quot;, &quot;Son rétabli !&quot;, 5);
    },
    /**
     * Sauvegarde de la playlist courante dans le local storage
     *
     * @method saveInBrowser
     */
    saveInBrowser: function() {
      var playlist = JSON.stringify(Playlist.selectedTracks);
      localStorage.setItem(&quot;playlist&quot;, playlist);
      GUI.alert(&quot;success&quot;, &quot;Playlist sauvegardée !&quot;, 5);
    },
    /**
     * Sauvegarde de la playlist courante sur Deezer
     *
     * @method saveOnDeezer
     */
    saveOnDeezer: function() {
      if (user !== null) {
        DZ.api(&quot;user/me/playlists&quot;, &quot;POST&quot;, {title : &quot;HARMONEEZER&quot;}, function(response) {
           Playlist.deezerId = response.id;
           DZ.api(&quot;playlist/&quot; + response.id + &quot;/tracks&quot;, &quot;POST&quot;, {songs: Playlist.tracksIds.join()}, function(response) {
              GUI.alert(&quot;success&quot;, &quot;Votre playlist est sur Deezer !&quot;, 5);
           });
        });
      } else {
        GUI.alert(&quot;error&quot;, &quot;Vous n&#x27;êtes pas connecté(e) !&quot;, 5);
      }
    },
    /**
     * Export CSV de la playlist courante
     *
     * @method export
     */
    export: function() {
      $( &quot;#csv-export&quot; ).tableToCSV();
      GUI.alert(&quot;success&quot;, &quot;Playlist exportée !&quot;, 5);
    },
    /**
     * Effacement de la playlist courante
     *
     * @method delete
     */
    delete: function() {
      if (Playlist.selectedTracks.length &gt; 0) {
        var message = &quot;Voulez-vous vraiment supprimer votre playlist ?&lt;br&gt;&quot;;
            message += &quot;Celle-ci sera supprimée définitivement du navigateur et sur Deezer.&quot;;
        alertify.defaults.glossary.title = &quot;Attention !&quot;;
        // Si l&#x27;utilisateur est d&#x27;accord :
        alertify.confirm(message, function() {
          // - on supprime la playlist de la session courante
          Playlist.reset();
          // - on supprime la playlist du local storage
          if (localStorage.getItem(&quot;playlist&quot;) !== null) {
            localStorage.removeItem(&quot;playlist&quot;);
            GUI.alert(&quot;success&quot;, &quot;Playlist effacée du navigateur !&quot;, 5);
          } else {
            GUI.alert(&quot;warning&quot;, &quot;Playlist non sauvegardée localement&quot;, 5);
          }
          // - on supprime la playlist sur Deezer
          if (Playlist.deezerId != -1) {
            DZ.api(&quot;playlist/&quot; + Playlist.deezerId, &quot;DELETE&quot;, function(response) {
              GUI.alert(&quot;success&quot;, &quot;Playlist effacée sur Deezer !&quot;, 5);
            });
          } else {
            GUI.alert(&quot;warning&quot;, &quot;Playlist non sauvegardée sur Deezer&quot;, 5);
          }
        }).set(&quot;labels&quot;, { ok:&quot;Oui&quot;, cancel:&quot;Non&quot; });
      } else {
        GUI.alert(&quot;error&quot;, &quot;Votre playlist est vide !&quot;, 5);
      }
    },
    /**
     * Changement automatique de morceau
     *
     * @method autochange
     */
     autochange: function() {
       DZ.Event.subscribe(&quot;track_end&quot;, function() {
         GUI.playlist.next();
       });
     },
    /**
     * Passage au morceau précédent
     *
     * @method previous
     */
    previous: function() {
      GUI.player.prev();
      $( &quot;#playlist&quot; ).trigger( &quot;trackChanged&quot; );
    },
    /**
     * Aller en arrière dans le morceau
     *
     * @method back
     */
    back: function() {
      if (GUI.player.trackPosition &gt; 10) {
        GUI.player.trackPosition -= 10;
      }
      GUI.player.seek(GUI.player.trackPosition);
    },
    /**
     * Lire la playlist depuis le début
     *
     * @method play
     */
    play: function() {
      if (GUI.player.tracksLoaded) {
        GUI.player.play();
      } else {
        GUI.player.playTracks(Playlist.tracksIds, function() {
          GUI.player.tracksLoaded = true;
          $( &quot;#playlist&quot; ).trigger( &quot;trackChanged&quot; );
        });
      }
    },
    /**
     * Lire la playlist à partir d&#x27;un morceau
     *
     * @method playFrom
     */
    playFrom: function() {
      var index = parseInt($( this ).find( &quot;#playlist-track-index&quot; ).val());
      GUI.player.playTracks(Playlist.tracksIds, index);
      $( &quot;#playlist&quot; ).trigger( &quot;trackChanged&quot; );
    },
    /**
     * Mettre en pause un morceau
     *
     * @method pause
     */
    pause: function() {
      GUI.player.pause();
    },
    /**
     * Lecture ou pause
     *
     * @method playPause
     */
    playPause: function() {
      GUI.player.isPlaying() ? GUI.playlist.pause() : GUI.playlist.play();
    },
    /**
     * Aller en avant dans le morceau
     *
     * @method back
     */
    forth: function() {
      if (GUI.player.trackPosition &lt; 90) {
        GUI.player.trackPosition += 10;
      }
      GUI.player.seek(GUI.player.trackPosition);
    },
    /**
     * Passage au morceau suivant
     *
     * @method next
     */
    next: function() {
      GUI.player.next();
      $( &quot;#playlist&quot; ).trigger( &quot;trackChanged&quot; );
    },
    /**
     * Ajout d&#x27;un morceau à la playlist
     *
     * @method addTrack
     */
    addTrack: function(eltId) {
      var track = JSON.parse(decodeURIComponent($( &quot;#&quot; + eltId ).next().val()));
      Playlist.addTrack(track);
      GUI.player.addToQueue([track._id]);
      GUI.alert(&quot;success&quot;, &quot;Morceau ajouté à votre playlist&quot;, 5);
    },
    /**
     * Actions à effectuer après suppression d&#x27;un morceau de la playlist
     *
     * @method removeTrack
     */
    removeTrack: function() {
      GUI.player.tracksLoaded = false;
      GUI.player.isPlaying() ? GUI.playlist.play() : GUI.player.playTracks([]);
      GUI.alert(&quot;success&quot;, &quot;Morceau supprimé !&quot;, 5);
    },
    /**
     * Gestion de l&#x27;icône de lecture
     *
     * @method icon
     */
    icon: function() {
      // On utilise setTimeout car Deezer ne propose pas de callback pour les contrôles
      setTimeout(function() {
        var index = DZ.player.getCurrentIndex();
        $( &quot;.playlist-item&quot;, &quot;#playlist&quot; ).find( &quot;.spinner&quot; ).fadeOut();
        $( &quot;#track-&quot; + index ).find( &quot;.spinner&quot; ).fadeIn();
      }, 1000);
    }
  },
  /**
   * Classe interne gérant les éléments relatifs aux favoris
   *
   * @class GUI.favorites
   */
  favorites: {
    /**
     * Gestion de la visibilité de l&#x27;iPod
     *
     * @method ipod
     */
    ipod: function() {
      var $ipod = $( &quot;#ipod-wrapper&quot; ),
          $ipodState = $( &quot;#fav-ipod .state&quot; );
      $ipod.is( &quot;:visible&quot; ) ? $ipod.fadeOut() : $ipod.fadeIn();
      GUI.favorites.changeState($ipodState, &quot;iPod activé !&quot;, &quot;iPod désactivé !&quot;);
    },
    /**
     * Gestion des infobulles
     *
     * @method tooltip
     */
    tooltip: function() {
      var $tooltipState = $( &quot;#fav-tooltip .state&quot; );
      if (GUI.tooltipAllowed) {
        GUI.tooltipAllowed = false;
        $( &quot;[title != &#x27;&#x27;]&quot; ).popup( &quot;destroy&quot; ); // Semantic UI
        $( &quot;[title != &#x27;&#x27;]&quot; ).qtip( &quot;destroy&quot;, true ); // qTip²
      } else {
        GUI.tooltipAllowed = true;
        GUI.tooltips();
      }
      GUI.favorites.changeState($tooltipState, &quot;Infobulles activées !&quot;, &quot;Infobulles désactivées !&quot;);
    },
    /**
     * Gestion des notifications
     *
     * @method notify
     */
    notify: function() {
      var $notifState = $( &quot;#fav-notify .state&quot; );
      GUI.notifAllowed ? (GUI.notifAllowed = false) : (GUI.notifAllowed = true);
      GUI.favorites.changeState($notifState, &quot;Notifications activées !&quot;, &quot;Notifications désactivées !&quot;);
    },
    /**
     * Gestion des sons d&#x27;ambiance
     *
     * @method sound
     */
    sound: function() {
      var $soundState = $( &quot;#fav-sound .state&quot; );
      GUI.soundAllowed ? (GUI.soundAllowed = false) : (GUI.soundAllowed = true);
      GUI.favorites.changeState($soundState, &quot;Sons d&#x27;ambiance activés !&quot;, &quot;Sons d&#x27;ambiance désactivés !&quot;);
    },
    /**
     * Gestion de l&#x27;autocomplétion
     *
     * @method autocomplete
     */
    autocomplete: function() {
      var $autocompleteState = $( &quot;#fav-autocomplete .state&quot; );
      if (GUI.autocompleteAllowed) {
        $( &quot;#autocomplete&quot; ).fadeOut();
        GUI.autocompleteAllowed = false;
      } else {
        GUI.autocompleteAllowed = true;
      }
      GUI.favorites.changeState($autocompleteState, &quot;Autocomplétion activée !&quot;, &quot;Autocomplétion désactivée !&quot;);
    },
    /**
     * Gestion des doublons dans les suggestions
     *
     * @method duplicate
     */
    duplicate: function() {
      var $duplicateState = $( &quot;#fav-duplicate .state&quot; );
      Sorting.duplicatesAllowed ? (Sorting.duplicatesAllowed = false) : (Sorting.duplicatesAllowed = true);
      GUI.favorites.changeState($duplicateState, &quot;Doublons activés !&quot;, &quot;Doublons désactivés !&quot;);
    },
    /**
     * Sélection d&#x27;une tolérance pour le tempo
     *
     * @method tempoRange
     */
    tempoRange: function() {
      var tempoVariation = $( &quot;input[type=&#x27;range&#x27;]&quot; ).val();
      $( &quot;input[type=&#x27;range&#x27;] + span&quot; ).text( tempoVariation + &quot; %&quot; );
      GUI.tempoVariation = (tempoVariation / 100);
    },
    /**
     * Sélection de l&#x27;algorithme de tri par défaut
     *
     * @method defaultSorting
     */
    defaultSorting: function() {
      GUI.selectedSorting = &quot;default&quot;;
    },
    /**
     * Sélection de l&#x27;algorithme de tri favorisant le tempo
     *
     * @method tempoFirstSorting
     */
    tempoFirstSorting: function() {
      GUI.selectedSorting = &quot;tempoFirst&quot;;
    },
    /**
     * Sélection de l&#x27;algorithme de tri favorisant la tonalité
     *
     * @method keyFirstSorting
     */
    keyFirstSorting: function() {
      GUI.selectedSorting = &quot;keyFirst&quot;;
    },
    /**
     * Sélection de l&#x27;algorithme de tri croissant du tempo
     *
     * @method ascTempoSorting
     */
    ascTempoSorting: function() {
      GUI.selectedSorting = &quot;ascTempo&quot;;
    },
    /**
     * Sélection de l&#x27;algorithme de tri décroissant du tempo
     *
     * @method descTempoSorting
     */
    descTempoSorting: function() {
      GUI.selectedSorting = &quot;descTempo&quot;;
    },
    /**
     * Sélection du tri placebo
     *
     * @method noSorting
     */
    noSorting: function() {
      GUI.selectedSorting = &quot;none&quot;;
    },
    /**
     * Changement d&#x27;état (on/off)
     *
     * @method changeState
     * @param {Object} $state Champ caché contenant l&#x27;état de l&#x27;objet dans le DOM
     * @param {String} positiveMessage Message d&#x27;activation (vert)
     * @param {String} negativeMessage Message de désactivation (rouge)
     */
    changeState: function($state, onMessage, offMessage) {
      if ($state.val() == &quot;on&quot;) {
        GUI.alert(&quot;error&quot;, offMessage, 5);
        $state.val( &quot;off&quot; );
      } else {
        GUI.alert(&quot;success&quot;, onMessage, 5);
        $state.val( &quot;on&quot; );
      }
    }
  },
  /**
   * Classe interne gérant les éléments relatifs aux ambiances
   *
   * @class GUI.atmospheres
   */
  atmospheres: {
    /**
     * Initialisation du plugin Vegas pour les backgrounds animés
     *
     * @method vegas
     */
    backgrounds: function() {
      if ($( window ).width() &gt;= 600) {
        $( &quot;#main&quot; ).vegas({
            transition: &quot;swirlLeft&quot;,
            slide: 0,
            slides: [
                { src: &quot;./images/background/neutral.jpg&quot; },
                { src: &quot;./images/background/rock.jpg&quot; },
                { src: &quot;./images/background/electro.jpg&quot; },
                { src: &quot;./images/background/hiphop.jpg&quot; },
                { src: &quot;./images/background/folk.jpg&quot; },
                { src: &quot;./images/background/classical.jpg&quot; },
                { src: &quot;./images/background/jazz.jpg&quot; },
                { src: &quot;./images/background/metal.jpg&quot; }
            ]
        });
        $( &quot;#main&quot; ).vegas(&#x27;pause&#x27;);
      }
    },
    /**
     * Changement d&#x27;ambiance
     *
     * @method apply
     * @param {Number} index Indice de l&#x27;ambiance dans Vegas
     * @param {String} atmo Nom de l&#x27;ambiance
     */
    apply: function(index, atmo) {
      $( &quot;#&quot; + atmo + &quot;-atmo&quot; ).addClass( &quot;green-item&quot; );
      $( &quot;#&quot; + atmo + &quot;-atmo&quot; ).siblings().removeClass( &quot;green-item&quot; );
      $( &quot;#main&quot; ).vegas(&quot;jump&quot;, index);
      // $( &quot;.pusher&quot; ).attr( &quot;style&quot;, &quot;background:url(&#x27;images/background/&quot; + atmo + &quot;.jpg&#x27;) no-repeat center center fixed !important&quot; );
      if (GUI.soundAllowed &amp;&amp; atmo != &quot;neutral&quot;) {
        var audio = new Audio( &quot;./sounds/&quot; + atmo + &quot;.ogg&quot;);
        audio.play();
      }
    },
    /**
     * Ambiance neutre
     *
     * @method neutral
     */
    neutral: function() {
      GUI.atmospheres.apply(0, &quot;neutral&quot;);
    },
    /**
     * Ambiance Rock
     *
     * @method rock
     */
    rock: function() {
      GUI.atmospheres.apply(1, &quot;rock&quot;);
    },
    /**
     * Ambiance Electro
     *
     * @method electro
     */
    electro: function() {
      GUI.atmospheres.apply(2, &quot;electro&quot;);
    },
    /**
     * Ambiance Hip-Hop
     *
     * @method hiphop
     */
    hiphop: function() {
      GUI.atmospheres.apply(3, &quot;hiphop&quot;);
    },
    /**
     * Ambiance Folk
     *
     * @method folk
     */
    folk: function() {
      GUI.atmospheres.apply(4, &quot;folk&quot;);
    },
    /**
     * Ambiance Classique
     *
     * @method classical
     */
    classical: function() {
      GUI.atmospheres.apply(5, &quot;classical&quot;);
    },
    /**
     * Ambiance Jazz
     *
     * @method jazz
     */
    jazz: function() {
      GUI.atmospheres.apply(6, &quot;jazz&quot;);
    },
    /**
     * Ambiance Metal
     *
     * @method metal
     */
    metal: function() {
      GUI.atmospheres.apply(7, &quot;metal&quot;);
    }
  },
  /**
   * Classe interne gérant les éléments relatifs au compte utilisateur
   *
   * @class GUI.account
   */
  account: {
    /**
     * Vérification visant à connaître le statut de connexion
     *
     * @method status
     */
    status: function() {
      DZ.getLoginStatus(function(response) {
      	if (response.authResponse) {
          GUI.account.info();
      	}
      });
    },
    /**
     * Gestion de la connexion d&#x27;un utilisateur
     *
     * @method login
     */
    login: function() {
      if (GUI.user === null) {
        DZ.login(function(response) {
          if (response.authResponse &amp;&amp; response.status == &quot;connected&quot;) { // Si tout se passe bien
            GUI.account.info();
            GUI.alert(&quot;success&quot;, &quot;Connexion OK !&quot;, 3);
            GUI.menu.toggleSidebar( &quot;#user&quot;, &quot;maroon&quot; );
          } else { // Si la connexion échoue
            GUI.alert(&quot;error&quot;, &quot;Connexion refusée !&quot;, 5);
          }
        }, { perms: &quot;basic_access,manage_library,delete_library&quot; });
      }
    },
    /**
     * Gestion de la déconnexion d&#x27;un utilisateur
     *
     * @method logout
     */
    logout: function() {
      DZ.logout();
      $( &quot;#user-connected&quot; ).hide();
      $( &quot;#user-not-connected&quot; ).show();
      GUI.alert(&quot;success&quot;, &quot;Déconnexion OK !&quot;, 3);
      $( &quot;#user&quot; ).sidebar( &quot;toggle&quot; );
    },
    /**
     * Récupération des informations d&#x27;un utilisateur
     *
     * @method info
     */
    info: function() {
      DZ.api(&quot;/user/me&quot;, function(response) {
        var user = new User(
                              response.id,
                              response.name,
                              response.inscription_date,
                              response.link,
                              response.picture_small
                            );
        GUI.user = user;
        $( &quot;#user-img&quot; ).attr({ src:user.getPicture(), alt:user.getName() });
        $( &quot;#user-name&quot; ).text( user.getName() ).attr( &quot;href&quot;, user.getLink() );
        $( &quot;#user-date&quot; ).text( &quot;Inscrit le &quot; + user.getInscriptionDate() );
        $( &quot;#user-not-connected&quot; ).hide();
        $( &quot;#user-connected&quot; ).show();
      });
    }
  },
  /**
   * Classe interne gérant divers événements
   *
   * @class GUI.misc
   */
  misc: {
    /**
     * Gestion du clic sur le logo
     *
     * @method logo
     */
    logo: function() {
      GUI.misc.showModal( $( &quot;#about&quot; ) );
    },
    /**
     * Gestion du clic sur la case d&#x27;aide
     *
     * @method help
     */
    help: function() {
      GUI.misc.showModal( $( &quot;#help&quot; ) );
    },
    /**
     * Affichage d&#x27;une boîte modale
     *
     * @method showModal
     */
    showModal: function($selector) {
      $selector.modal( &quot;show&quot; );
    },
    /**
     * Affichage ou non du carousel de résultats
     *
     * @method toggleCarousel
     */
    toggleCarousel: function() {
      var $tracks = $( &quot;#tracks&quot; ),
          $toggle = $( &quot;#toggle-carousel i&quot; );

      if (!$tracks.is( &quot;:empty&quot; ) &amp;&amp; $tracks.is( &quot;:visible&quot; )) {
        $tracks.slideUp();
        $toggle
          .switchClass( &quot;up&quot;, &quot;down&quot; )
          .css( &quot;border-color&quot;, &quot;#F04A3C&quot; );
      } else {
        if (!$tracks.is( &quot;:empty&quot; )) {
          $tracks.slideDown();
          $toggle
            .switchClass( &quot;down&quot;, &quot;up&quot;)
            .css( &quot;border-color&quot;, &quot;#188AE3&quot; );
        } else {
          GUI.alert(&quot;error&quot;, &quot;Aucune recherche effectuée !&quot;, 5);
        }
      }
    }
  }
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
